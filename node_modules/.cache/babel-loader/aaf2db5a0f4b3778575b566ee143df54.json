{"ast":null,"code":"import * as types from './actions';\nconst initialState = {\n  start: false,\n  dataCart: [],\n  errorCart: null,\n  totalMoney: 0,\n  //tong tien trong gio hang\n  totalItems: 0 // tong so luong san pham\n\n};\nexport const cartReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case types.START_ADD_CART:\n      return { ...state,\n        ...{\n          start: action.start\n        }\n      };\n\n    case types.ADD_CART_FAIL:\n      return { ...state,\n        ...{\n          errorCart: action.error\n        }\n      };\n\n    case types.ADD_CART_SUCCESS:\n      const infoPd = action.data;\n      const idPd = infoPd.id; // kiem tra xem san pham mua da ton tai trong gio hang chua.\n      // neu ma chua ton tai thi them moi san pham vao gio hang.\n      // neu da ton tai thi chi cap nhat so luong mua trong gio hang.\n\n      const findPd = state.dataCart.find(item => item.id === idPd);\n\n      if (findPd) {\n        infoPd.qty += 1;\n        return { ...state,\n          totalMoney: parseFloat(state.totalMoney) + parseFloat(infoPd.price),\n          errorCart: null\n        };\n      } else {\n        infoPd.qty = 1;\n        return {\n          dataCart: [...state.dataCart, infoPd],\n          errorCart: null,\n          totalMoney: parseFloat(state.totalMoney) + parseFloat(infoPd.price),\n          totalItems: state.totalItems + 1\n        };\n      }\n\n    // them so luong mua - mac dinh mua 1 san pham\n\n    case types.REMOVE_ITEM_CART:\n      const rowId = action.rowId; // lay duoc san pham can xoa trong gio hang theo rowId \n      // xoa bo thang day - cap nhat lai gio hang\n      // cap nhat lai tong tien\n      // cap nhat lai so luong san pham \n\n      const newDataCart = state.dataCart.map(item => item.id !== rowId); // chua nhung items ko bi xoa\n\n      const removeItem = state.dataCart.find(item => item.id === rowId); // bi xoa\n\n      const moneyRemoved = parseFloat(removeItem.price);\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/Users/loctran/Desktop/learnReact/src/shopping/pages/carts/reducers/cart.js"],"names":["types","initialState","start","dataCart","errorCart","totalMoney","totalItems","cartReducer","state","action","type","START_ADD_CART","ADD_CART_FAIL","error","ADD_CART_SUCCESS","infoPd","data","idPd","id","findPd","find","item","qty","parseFloat","price","REMOVE_ITEM_CART","rowId","newDataCart","map","removeItem","moneyRemoved"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,WAAvB;AAEA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,KAAK,EAAE,KADU;AAEjBC,EAAAA,QAAQ,EAAE,EAFO;AAGjBC,EAAAA,SAAS,EAAE,IAHM;AAIjBC,EAAAA,UAAU,EAAE,CAJK;AAID;AAChBC,EAAAA,UAAU,EAAE,CALK,CAKH;;AALG,CAArB;AAQA,OAAO,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGP,YAAT,EAAuBQ,MAAvB,KAAkC;AACzD,UAAOA,MAAM,CAACC,IAAd;AACI,SAAKV,KAAK,CAACW,cAAX;AACI,aAAO,EACH,GAAGH,KADA;AAEH,WAAG;AAAEN,UAAAA,KAAK,EAAEO,MAAM,CAACP;AAAhB;AAFA,OAAP;;AAIJ,SAAKF,KAAK,CAACY,aAAX;AACQ,aAAO,EACH,GAAGJ,KADA;AAEH,WAAG;AAAEJ,UAAAA,SAAS,EAAEK,MAAM,CAACI;AAApB;AAFA,OAAP;;AAKR,SAAKb,KAAK,CAACc,gBAAX;AACI,YAAMC,MAAM,GAAGN,MAAM,CAACO,IAAtB;AACA,YAAMC,IAAI,GAAGF,MAAM,CAACG,EAApB,CAFJ,CAGI;AACA;AACA;;AACA,YAAMC,MAAM,GAAGX,KAAK,CAACL,QAAN,CAAeiB,IAAf,CAAoBC,IAAI,IAAGA,IAAI,CAACH,EAAL,KAAYD,IAAvC,CAAf;;AACA,UAAGE,MAAH,EAAW;AACPJ,QAAAA,MAAM,CAACO,GAAP,IAAc,CAAd;AACA,eAAO,EACH,GAAGd,KADA;AAEHH,UAAAA,UAAU,EAAEkB,UAAU,CAACf,KAAK,CAACH,UAAP,CAAV,GAA+BkB,UAAU,CAACR,MAAM,CAACS,KAAR,CAFlD;AAGHpB,UAAAA,SAAS,EAAE;AAHR,SAAP;AAKH,OAPD,MAOO;AACHW,QAAAA,MAAM,CAACO,GAAP,GAAa,CAAb;AACA,eAAO;AACHnB,UAAAA,QAAQ,EAAE,CAAC,GAAGK,KAAK,CAACL,QAAV,EAAoBY,MAApB,CADP;AAEHX,UAAAA,SAAS,EAAE,IAFR;AAGHC,UAAAA,UAAU,EAAEkB,UAAU,CAACf,KAAK,CAACH,UAAP,CAAV,GAA+BkB,UAAU,CAACR,MAAM,CAACS,KAAR,CAHlD;AAIHlB,UAAAA,UAAU,EAAEE,KAAK,CAACF,UAAN,GAAiB;AAJ1B,SAAP;AAOP;;AACG;;AACJ,SAAKN,KAAK,CAACyB,gBAAX;AACI,YAAMC,KAAK,GAAGjB,MAAM,CAACiB,KAArB,CADJ,CAEI;AACA;AACA;AACA;;AACA,YAAMC,WAAW,GAAGnB,KAAK,CAACL,QAAN,CAAeyB,GAAf,CAAmBP,IAAI,IAAIA,IAAI,CAACH,EAAL,KAAYQ,KAAvC,CAApB,CANJ,CAMuE;;AACnE,YAAMG,UAAU,GAAGrB,KAAK,CAACL,QAAN,CAAeiB,IAAf,CAAoBC,IAAI,IAAIA,IAAI,CAACH,EAAL,KAAYQ,KAAxC,CAAnB,CAPJ,CAOuE;;AACnE,YAAMI,YAAY,GAAGP,UAAU,CAACM,UAAU,CAACL,KAAZ,CAA/B;;AACJ;AACI,aAAOhB,KAAP;AA/CR;AAiDH,CAlDM","sourcesContent":["import * as types from './actions';\n\nconst initialState = {\n    start: false,\n    dataCart: [],\n    errorCart: null,\n    totalMoney: 0,  //tong tien trong gio hang\n    totalItems: 0 // tong so luong san pham\n}\n\nexport const cartReducer = (state = initialState, action) => {\n    switch(action.type) {\n        case types.START_ADD_CART:\n            return {\n                ...state,\n                ...{ start: action.start }\n            }\n        case types.ADD_CART_FAIL:\n                return {\n                    ...state,\n                    ...{ errorCart: action.error }\n                }   \n\n        case types.ADD_CART_SUCCESS:\n            const infoPd = action.data;\n            const idPd = infoPd.id;\n            // kiem tra xem san pham mua da ton tai trong gio hang chua.\n            // neu ma chua ton tai thi them moi san pham vao gio hang.\n            // neu da ton tai thi chi cap nhat so luong mua trong gio hang.\n            const findPd = state.dataCart.find(item=> item.id === idPd);\n            if(findPd) {\n                infoPd.qty += 1;\n                return {\n                    ...state,\n                    totalMoney: parseFloat(state.totalMoney) + parseFloat(infoPd.price),\n                    errorCart: null\n                }\n            } else {\n                infoPd.qty = 1;\n                return {\n                    dataCart: [...state.dataCart, infoPd],\n                    errorCart: null,\n                    totalMoney: parseFloat(state.totalMoney) + parseFloat(infoPd.price),\n                    totalItems: state.totalItems+1\n                \n            }\n        }\n            // them so luong mua - mac dinh mua 1 san pham\n        case types.REMOVE_ITEM_CART:\n            const rowId = action.rowId;\n            // lay duoc san pham can xoa trong gio hang theo rowId \n            // xoa bo thang day - cap nhat lai gio hang\n            // cap nhat lai tong tien\n            // cap nhat lai so luong san pham \n            const newDataCart = state.dataCart.map(item => item.id !== rowId); // chua nhung items ko bi xoa\n            const removeItem = state.dataCart.find(item => item.id === rowId); // bi xoa\n            const moneyRemoved = parseFloat(removeItem.price)\n        default:\n            return state;\n    }\n}"]},"metadata":{},"sourceType":"module"}